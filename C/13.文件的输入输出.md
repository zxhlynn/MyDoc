# 对文件的输入输出

## 文件基础知识

在程序设计中，主要用到两种文件：

1. 程序文件。包括源程序文件、目标文件、可执行文件等。这种文件的内容是程序代码。

2. 数据文件。文件的内容不是程序，而是供程序运行时读写的数据，如在程序运行过程中输出到磁盘（或其他外部设备）的数据，或在程序运行过程中供读入的数据。

程序中常用的输入输出都是以终端为对象的，即从终端的键盘输入数据，运行结果输出到终端显示器。实际上也需要将一些数据（运行的最终结果或中间数据）输出到磁盘上保存起来，以后需要时再从磁盘中输入到计算机内存。这就需要用到磁盘文件。

为了简化用户对输入输出设备的操作，使用户不必去区分各种输入输出设备之间的区别，**操作系统把各种设备都统一作为文件来处理**。从操作系统的角度看，每一个与主机相连的输入输出设备都看作一个文件。

所谓文件一般是指存储在外部介质上数据的集合。操作系统是以文件为单位对数据进行管理的。也就是说，如果想找存放在外部介质上的数据，必须先按文件名找到所指定的文件，然后再从该文件中读取数据。要向外部介质上存储数据也必须先建立一个文件（以文件名作为标志），才能向它输出数据。

输入输出是数据传送的过程，数据如流水一样从一处流向另一处，因此常将输入输出形象地成为流（stream），即**数据流**。流表示了信息从**源**到**目的**端的流动。在输入操作时，数据从文件流向计算机内存，在输出操作时，数据从计算机流向文件。文件是由运行环境（操作系统）进行统一管理的。“流”是一个传输通道，数据可以从运行环境流入程序中，或从程序流至运行环境。

无论程序一次读写一个字符，或一行文字，或一个指定的数据区，作为输入输出的各种文件或设备都是统一以逻辑数据流的方式出现的。C 语言把文件看作是一个字符（或字节）的序列，即由一个个字符（或字节）的数据顺序组成。一个输入输出流就是一个字符流或字节流。

C 的数据文件由一连串的字符（或字节）组成，而不考虑行的界限，两行数据间不会自动加分隔符，对文件的存取是以字符（字节）为单位的。输入输出数据流的开始和结束仅受程序控制而不受物理符号控制，这种文件称为流式文件。

### 文件名

一个文件要有一个唯一的文件标识，以便用户识别和引用。文件标识包括 3 部分：

1. 文件路径
2. 文件名主干
3. 文件后缀

![](./img/file.png)

文件标识常被称为**文件名**，

### 文件的分类

根据数据的组织形式，数据文件可分为ASCII文件和二进制文件。数据再内存中是以二进制形式存储的，如果不加转换地输出到外存，就是二进制文件，可以认为它就是存储在内存的数据的映像，所以也称之为映像文件（image file）。如果要求在外存上以ASCII代码形式存储，则需要在存储前进行转换。ASCII文件又称文本文件，每一个字节放一个字符的ASCII代码。

一个数据再磁盘上怎样存储：字符一律以ASCII形式存储，数值型数据既可以用ASCII形式存储，也可以用二进制形式存储。如有整数10000，如果用ASCII码形式输出到磁盘，则占5个字节（每个字符占一个字节），而用二进制形式输出，则在磁盘上只占4个字节。

用ASCII码形式输出时字节与字符一一对应，一个字节代表一个字符，因而便于对字符进行逐个处理，也便于输出字符。但是一般占储存空间较多，而且要花费转换时间（二进制形式与ASCII码间的转换）。用二进制形式输出数值，可以节省外存空间和转换时间，把内存中的存储单元中的内容原封不动地输出到磁盘（或其他外部介质）上，此时每一个字节并不一定代表一个字符。如果程序运行过程中有的中间数据需要保存在外部介质上，以便在需要时再输入到内存，一般用二进制文件比较方便。在事务管理中，常有大批数据存放在磁盘上，随时调入计算机进行查询或处理，然后又把修改过的信息再存回磁盘，这时也常用二进制文件。

![](./img/save.png)

### 常见三种字符编码的区别：ASCII、Unicode、UTF-8

[详情](https://www.cnblogs.com/zhaokunbokeyuan256/p/7680337.html)
